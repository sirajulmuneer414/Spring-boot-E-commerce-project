<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lenscraft - Sign In</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Outfit:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Icons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <style>
        /* Internal Premium Design System */
        :root {
            --primary: #4F46E5;
            --primary-dark: #4338ca;
            --secondary: #10B981;
            --dark: #0F172A;
            --light: #F8FAFC;
            --font-heading: 'Outfit', sans-serif;
            --font-body: 'Inter', sans-serif;
        }

        body {
            font-family: var(--font-body);
            color: var(--dark);
            background-color: #F8FAFC;
            height: 100vh;
            overflow: hidden;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-heading);
        }

        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
            padding: 0.8rem 1.5rem;
            font-weight: 600;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .form-control {
            padding: 0.8rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid #E2E8F0;
            background-color: #F8FAFC;
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
            background-color: white;
        }

        .input-group-text {
            border: 1px solid #E2E8F0;
            background-color: #F8FAFC;
        }

        .split-layout {
            height: 100vh;
            display: flex;
        }

        .left-side {
            width: 50%;
            background: linear-gradient(135deg, #4F46E5 0%, #4338ca 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
        }

        .left-side img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            mix-blend-mode: overlay;
            opacity: 0.2;
        }

        .right-side {
            width: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            background: white;
        }

        .login-card {
            width: 100%;
            max-width: 450px;
        }

        .nav-back {
            position: absolute;
            top: 2rem;
            left: 2rem;
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.2s;
        }

        .nav-back:hover {
            color: var(--primary);
        }

        @media (max-width: 992px) {
            .left-side {
                display: none;
            }

            .right-side {
                width: 100%;
            }
        }
    </style>
</head>

<body>

    <div class="split-layout">
        <!-- Left Side (Visual) -->
        <div class="left-side">
            <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop"
                alt="Background">
            <div class="position-relative text-center p-5">
                <h1 class="display-3 fw-bold mb-3">Lenscraft.</h1>
                <p class="fs-4 fw-light opacity-75">Join our community of visionaries and experience the world with
                    clarity.</p>
            </div>
        </div>

        <!-- Right Side (Form) -->
        <div class="right-side position-relative">
            <a href="/" class="nav-back"><i class='bx bx-arrow-back'></i> Back to Home</a>

            <div class="login-card fade-in-up">
                <div class="mb-5">
                    <h2 class="fw-bold mb-2">Welcome Back</h2>
                    <p class="text-secondary text-base">Please enter your details to sign in.</p>
                </div>

                <!-- Alerts -->
                <div th:if="${param.userBlocked}" class="alert alert-danger d-flex align-items-center mb-4"
                    role="alert">
                    <i class='bx bx-block me-2 fs-5'></i>
                    <div><strong>Account Blocked:</strong> Please contact support.</div>
                </div>
                <!-- Spring Security default error parameter -->
                <div th:if="${param.error}" class="alert alert-danger d-flex align-items-center mb-4" role="alert">
                    <i class='bx bx-error-circle me-2 fs-5'></i>
                    <div><strong>Login Failed:</strong> Incorrect email or password. Please try again.</div>
                </div>
                <!-- Custom error parameter (if used) -->
                <div th:if="${param.passWordError}" class="alert alert-danger d-flex align-items-center mb-4"
                    role="alert">
                    <i class='bx bx-error-circle me-2 fs-5'></i>
                    <div><strong>Login Failed:</strong> Incorrect email or password. Please try again.</div>
                </div>
                <div th:if="${param.logout}" class="alert alert-success d-flex align-items-center mb-4" role="alert">
                    <i class='bx bx-check-circle me-2 fs-5'></i>
                    <div>Logged out successfully.</div>
                </div>

                <form th:action="@{/login}" method="post">
                    <div class="mb-4">
                        <label for="emailId"
                            class="form-label small text-uppercase fw-bold text-secondary tracking-wide">Email
                            Address</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class='bx bx-envelope text-secondary'></i></span>
                            <input type="email" class="form-control border-start-0 ps-0" id="emailId"
                                placeholder="name@example.com" name="username" required>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label for="password"
                            class="form-label small text-uppercase fw-bold text-secondary tracking-wide">Password</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class='bx bx-lock-alt text-secondary'></i></span>
                            <input type="password" class="form-control border-start-0 ps-0" id="password"
                                placeholder="Enter your password" name="password" required>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="rememberMe">
                            <label class="form-check-label text-secondary small" for="rememberMe">Remember me</label>
                        </div>
                        <a href="/forgot-password" class="text-primary text-decoration-none small fw-semibold">Forgot
                            Password?</a>
                    </div>

                    <div class="d-grid mb-4">
                        <button type="submit" class="btn btn-primary shadow-sm">Sign In</button>
                    </div>

                    <div class="text-center">
                        <p class="text-secondary small">Don't have an account? <a href="/register"
                                class="text-primary fw-bold text-decoration-none">Create Account</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>