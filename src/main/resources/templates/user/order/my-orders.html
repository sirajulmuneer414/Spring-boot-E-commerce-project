<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Lenscraft-My Orders</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');

    * {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
    }
    * a{
    text-decoration: none;
    }
        .sideBar {
            position: fixed;
            background-color: #d9d9d9;
            height: 100vh;
            width: fit-content;
            padding: 20px 10px;}


         .sideBarContent a{
            color: #b43e8f;
            text-decoration: none;
         }
         .sideBarContent{
            margin-bottom: 40px;
         }
    </style>
</head>
<body class="container-fluid">
<div th:replace="~{fragment::navBarHome}"></div>
<div class="row sideBar position-fixed d-flex flex-column justify-content-center align-items-center overflow-auto">
    <ul style="padding-left: 0;">
        <li class="sideBarContent">
            <a th:href="@{/shop/}"><h4>SHOP</h4></a>

        </li>
        <li class="sideBarContent">
            <form th:action="@{/order}">
                <input type="hidden" name="username" th:value="${username}">
                <button type="submit" style="border: none; padding: 0;background-color: #d9d9d9; color: #b43e8f"><h4>MY ORDERS</h4></button>
            </form>

        </li>
        <li class="sideBarContent">
            <a th:href="@{/shop/brands/}"><h4>BRANDS</h4></a>

        </li>
        <li class="sideBarContent">
            <a th:href="@{/user/wishlist}"><h4>WISHLIST</h4></a>

        </li>

        <li class="sideBarContent">
            <a th:href="@{/user/cart}"><h4>CART</h4></a>

        </li>
        <li th:if="${#authorization.expression('isAuthenticated()')}" class="logoutBtn d-flex justify-content-center align-items-center">
            <form th:action="@{/logout}" method="post" style="padding: 0; background-color: #d9d9d9">
                <button type="submit"  class="text-danger" style="padding: 0; border: none"><h4>LOG OUT</h4></button>
            </form>
        </li>
    </ul>
</div>
<div class="row container-fluid d-flex flex-column justify-content-start" style=" margin-left: 200px; overflow: scroll; margin-top: 70px; max-width: calc(100vw - 200px)">
    <div th:each="order : ${orders}">
        <h5 th:text="${'Order Id : '+order.orderId}"></h5>
        <div th:each="item : ${order.orderItems}">
            <div style="border: 1px solid black; border-radius: 5px" class="d-flex justify-content-between">

                <div style="height: 100px; width: 100px">
                    <img th:src="@{${'/productImages/'+item.product.productId+'/'+item.variable.image1}}" style="height: 100%; width: 100%">
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <h6 th:text="${item.product.productName}"></h6>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <h6 th:text="${item.quantity}"></h6>
                </div>
                <div class="d-flex justify-content-center align-items-center">

                    <h6 th:if="${item.orderStatus.name()=='PENDING'}" class="text-warning">PENDING</h6>
                    <h6 th:if="${item.orderStatus.name()=='DELIVERED'}" class="text-success">DELIVERED</h6>
                    <h6 th:if="${item.orderStatus.name()=='CANCELLED'}" class="text-danger">CANCELLED</h6>

                </div>
                <div class="d-flex justify-content-center align-items-center" th:unless="${item.orderStatus.name()=='CANCELLED'}">
                    <a th:href="@{/order/item/cancel/{orderItemId}(orderItemId = ${item.orderItemId})}" class="btn-danger" style="border-radius: 2px">CANCEL</a>
                </div>
            </div>

        </div>

    </div>
</div>
<!--<div class="d-flex justify-content-center" th:if="${totalPages > 1}">-->
<!--    <ul class="pagination">-->
<!--        <li class="page-item" th:if="${pageNo > 1}">-->
<!--            <a class="page-link" style="color:#b43e8f;" th:href="@{'/order?pageNo=' + ${pageNo - 1}}">Previous</a>-->
<!--        </li>-->
<!--        <li class="page-item" th:class="${i} == ${pageNo}+1 ? 'page-item custom-active' : 'page-item'"-->
<!--            th:each="i : ${#numbers.sequence(1, totalPages)}">-->
<!--            <a class="page-link" style="color: white;" th:href="@{'/order?pageNo=' + ${i}}">[[${i}]]</a>-->
<!--        </li>-->
<!--        <li class="page-item" th:if="${pageNo < totalPages}">-->
<!--            <a class="page-link" style="color:#b43e8f;" th:href="@{'/order?pageNo=' + ${pageNo + 1}}">Next</a>-->
<!--        </li>-->
<!--    </ul>-->
<!--</div>-->
</body>
</html>